<div ng-controller="UpdatePostCtl">
    <div data-ng-init="initSubScope()">

        <div class="container-fluid" style="margin-top: 50px;">
            <div class="form-horizontal">

                <div ng-if="errorSelectCategory" id="errorSelectCategory"
                     class="ng-cloak alert alert-danger text-center">
                    Bitte wählen Sie eine Kategorie aus.
                </div>
                <div ng-if="errorUpdatePost" id="errorUpdatePost" class="ng-cloak alert alert-danger text-center">
                    Beim der Aktualisierung ist ein Fehler aufgetreten.
                </div>

                <!-- Form code begins -->
                <form id="formUpdatePost" name="formUpdatePost" method="post">

                    <!-- NAME -->
                    <div class="form-group">
                        <label class="col-md-2 control-label" for="updatePostName">Name:</label>
                        <div class="col-md-6">
                            <input class="form-control" type="text" id="updatePostName" ng-model="update.post.postName"
                                   ng-required="true">
                        </div>
                    </div>


                    <!-- NAME -->
                    <div class="form-group">
                        <label class="col-md-2 control-label" for="updatePostName">Art:</label>
                        <div class="col-md-6">
                            <p ng-if="update.post.flavour === 'verschenken'">Geschenk</p>
                            <p ng-if="update.post.flavour === 'verleihen'">Verleih</p>
                            <p ng-if="update.post.flavour === 'Dienstleistung'">Dienstleistung</p>
                        </div>
                    </div>

                    <script language="javascript" type="text/javascript" src="/js/components/datepicker.js"></script>

                    <!-- STATUS -->
                    <div class="form-group">
                        <label class="col-md-2 control-label text-left">Status:</label>
                        <div class="col-md-6">
                            <div class="dropdown">
                                <button class="ng-cloak btn btn-default dropdown-toggle" type="button"
                                        id="dropdownMenu2"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{update.post.status}}
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" id="updatePostStatus">
                                    <li ng-click="selectStatus(status)"
                                        ng-repeat="status in statusSelection"><a href="#">{{status.name}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- CATEGORY -->
                    <div class="form-group">
                        <label class="col-md-2 control-label text-left">Kategorie:</label>
                        <div class="col-md-6">
                            <div class="dropdown">
                                <button class="ng-cloak btn btn-default dropdown-toggle" type="button"
                                        id="dropdownMenu1"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{update.post.category.name}}
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" id="updatePostCategory">
                                    <li ng-click="selectCategory(category)"
                                        ng-repeat="category in categories | orderBy : 'id'"><a href="#">{{category.name}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- GUELTIG VON -->
                    <div class="form-group">
                        <label class="col-md-2 control-label">Gültig von:</label>
                        <div class="col-md-6">
                            <p>{{update.post.creationDate}} Uhr</p>
                        </div>
                    </div>

                    <!-- GUELTIG BIS -->
                    <div class="form-group">
                        <label class="col-md-2 control-label" for="updatePostDate">Gültig bis:</label>
                        <div class="col-md-6">
                            <input class="form-control" ng-model="update.post.period" ng-required="true" id="updatePostDate"
                                   name="date" placeholder="DD.MM.YYYY" type="text"/>
                        </div>
                    </div>

                    <!-- DESCRIPTIOM -->
                    <div class="form-group">
                        <label class="col-md-2 control-label" for="updatePostDescription">Beschreibung:</label>
                        <div class="col-md-6">
                        <textarea class="form-control" id="updatePostDescription" ng-model="update.post.description"
                          ng-required="true"
                          rows="5"></textarea>
                        </div>
                    </div>

                    <div class="form-group text-center">
                        <button ng-click="doCancelUpdatePost()" type="submit"
                                id="cancelPostSubmitButton" class="btn btn-default">Abbrechen
                        </button>
                        <button ng-click="formUpdatePost.$valid && doUpdatePost()" type="submit"
                                id="updatePostSubmitButton" class="btn btn-primary">Aktualisieren
                        </button>
                    </div>
                </form>

            </div>
        </div>

    </div>
</div>
